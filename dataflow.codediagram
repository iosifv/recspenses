{"id":-1,"name":"FROM_FILE","userId":-1,"createdAt":"","updatedAt":"","content":{"items":[{"uid":"i-owdAqfxN","position":{"x":110,"y":110},"sizes":{"width":400,"height":211},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"filePathNode","attrs":{"pathToFile":"src/types/","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"Expense.ts"}]},{"type":"paragraph","content":[{"type":"text","text":"This is where the type definitions are for "}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"DBExpense"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Expense"}]}]}]},{"type":"paragraph","content":[{"type":"text","text":"Expense has an extra logic in the constructor where it hydrates data from Tags"}]}]},"nodeType":"block"},{"uid":"96HwlG9dp5","position":{"x":690,"y":410},"sizes":{"width":610,"height":476.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"filePathNode","attrs":{"pathToFile":"src/app/dashboard/","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"page.tsx"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"bold"}],"text":"\"use server\""}]},{"type":"paragraph","content":[{"type":"text","text":"In order to send the Expense type objects from the backend I need to map and dumb them down to mere arrays... "}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"export default async function Dashboard() {\n  const expenseData = await api.expense.getMine()\n\n  const simplifiedExpenses = expenseData.map((expense) => {\n    return {\n      id: expense.id,\n      name: expense.name,\n      amount: expense.amount,\n      currency: expense.currency,\n      frequency: expense.frequency,\n      tags: expense.tags.map((tag) => ({ id: tag.id, name: tag.name })),\n      createdAt: expense.createdAt.toISOString(),\n      updatedAt: expense.updatedAt.toISOString(),\n    }\n  })"}]}]},"nodeType":"block"},{"uid":"mAWw_jrWcy","position":{"x":90,"y":410},"sizes":{"width":540,"height":294.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"filePathNode","attrs":{"pathToFile":"src/server/api/routers/","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"expense.ts"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"getMine: publicProcedure.query<Expense[]>(async ({ ctx }) => {\n  [...]\n  let expenses: Expense[] = []\n  dbExpenses.forEach((dbExpense: DBExpense) => {\n    expenses.push(new Expense(user, dbExpense))\n  })\n\n  return expenses\n}),"}]}]},"nodeType":"block"},{"uid":"l6nuAdeJpj","position":{"x":1360,"y":410},"sizes":{"width":710,"height":424},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"filePathNode","attrs":{"pathToFile":"src/app/dashboard/","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"ComponentDashboard.tsx"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"bold"}],"text":"\"use client\""}]},{"type":"paragraph","content":[{"type":"text","text":"Here I need to do more processing on this array of objects which had to be sent as a stupid json instead of an array of objects"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"interface ComponentDashboardProps {\n  simplifiedExpenses: any\n}\n\nconst ComponentDashboard: React.FC<ComponentDashboardProps> = ({\n  simplifiedExpenses,\n}) => {\n  const expenseTransformed = simplifiedExpenses.map((expense: any) => {\n    expense.transformed = transformExpense(expense)\n    expense.original = `${expense.amount} ${expense.currency} ${expense.frequency}`\n    return expense\n  })"}]}]},"nodeType":"block"},{"uid":"j7APbir9v0","position":{"x":890,"y":70},"sizes":{"width":400,"height":242.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Solution I can think of:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Make a new type something like FrontendStupidExpense which has the logic to dumb down this Expense + Tag + TagType objects into an array"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Never return proper objects from the database so that I don't have an extra step ( stupid solution imho )"}]}]}]}]},"color":{"bgColor":"hsla(142, 31%, 22%, 1)","bgName":"green"},"nodeType":"block"},{"uid":"V21hkJMnPD","position":{"x":1340,"y":70},"sizes":{"width":400,"height":186.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Solution I can think of:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Create a new FrontendHydratedExpense type class"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"This should have a constructor that takes an array of FrontendStupidExpense jsons and creates the object with functions"}]}]}]}]}]}]},"color":{"bgColor":"hsla(142, 31%, 22%, 1)","bgName":"green"},"nodeType":"block"}],"configs":{"centerX":-39.53846153846154,"centerY":-19.76923076923077,"zoomLevel":0.9884615384615385},"arrowData":{"arrowsMap":{},"pointsMap":{},"edgesMap":{"edge-i-owdAqfxN-i-owdAqfxN-bottom-mAWw_jrWcy-mAWw_jrWcy-top":{"uid":"edge-i-owdAqfxN-i-owdAqfxN-bottom-mAWw_jrWcy-mAWw_jrWcy-top","fromNodeId":"i-owdAqfxN","fromHandleId":"i-owdAqfxN-bottom","toNodeId":"mAWw_jrWcy","toHandleId":"mAWw_jrWcy-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-V21hkJMnPD-V21hkJMnPD-bottom-l6nuAdeJpj-l6nuAdeJpj-top":{"uid":"edge-V21hkJMnPD-V21hkJMnPD-bottom-l6nuAdeJpj-l6nuAdeJpj-top","fromNodeId":"V21hkJMnPD","fromHandleId":"V21hkJMnPD-bottom","toNodeId":"l6nuAdeJpj","toHandleId":"l6nuAdeJpj-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-j7APbir9v0-j7APbir9v0-bottom-96HwlG9dp5-96HwlG9dp5-top":{"uid":"edge-j7APbir9v0-j7APbir9v0-bottom-96HwlG9dp5-96HwlG9dp5-top","fromNodeId":"j7APbir9v0","fromHandleId":"j7APbir9v0-bottom","toNodeId":"96HwlG9dp5","toHandleId":"96HwlG9dp5-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}}}}}}